# Именование проектов

_-api
_-monitoring
_-client
_-processor

### Использовать **kebab-case**

_Правильно:_

- **url-shortener**

_Не правильно:_

- **url_shortener**
- U**rlShortener**

### Использовать минимум значимых слов

Возможно все-таки имеет смысл использовать вспомогательные слова:

`*-api`, `*-daemon`, `*-tests`,

_Правильно:_

- **url-shortener**

_Не правильно:_

- **url-shortener-api**
- **url-shortener-service**

1. Для взаимодействия с внешним миром (с Интернетом) сервисам НЕОБХОДИМО использовать [REST](https://ru.wikipedia.org/wiki/REST) или [JSON-RPC](https://www.jsonrpc.org/).
2. Для взаимодействия между собой сервисам НЕОБХОДИМО использовать [gRPC](https://grpc.io/).
3. Каждому сервису РЕКОМЕНДУЕТСЯ предоставлять клиентскую библиотеку:
   - Клиентской библиотеке СЛЕДУЕТ содержать
   1. все структуры данных, необходимые для отправки запросавсе структуры данных, необходимые для чтения ответасписок возможных кодов ошибок, используемых в ответереализацию фасада к сервису, который инкапсулирует логику отправки запросов и получения ответов
   - Клиентской библиотеке НЕ ПОЗВОЛЯЕТСЯ содержать любую бизнес-логику (бизнес-логика должна находиться в сервисе)
4. Для даты и времени в ответах и запросах сервису НЕОБХОДИМО соблюдать [RFC 3339](https://tools.ietf.org/html/rfc3339). НЕОБХОДИМО хранить (в базе данных, в любом хранилище) и передавать (интерфейсы между сервисами/компонентами/приложениями/...) дату и время в **UTC**. Пример: **1970-01-01T12:00:00.234+00:00**. Если нужно передать только дату (без времени): **1970-01-01**.

## Документация

1. Всем сервисам НЕОБХОДИМО иметь документацию.
2. РЕКОМЕНДУЕТСЯ иметь документацию в Confluence, достаточную для понимания возможностей, предоставляемых сервисом и как ими пользоваться без чтения кода сервиса.
3. Каждому сервису, предоставляющему [REST](https://confluence.ozon.ru/pages/viewpage.action?pageId=78354208#id-%D0%9A%D0%BE%D0%BD%D0%B2%D0%B5%D0%BD%D1%86%D0%B8%D1%8F%D0%BF%D0%BE%D0%BC%D0%B8%D0%BA%D1%80%D0%BE%D1%81%D0%B5%D1%80%D0%B2%D0%B8%D1%81%D0%B0%D0%BC-REST) или [JSON-RPC](https://confluence.ozon.ru/pages/viewpage.action?pageId=78354208#id-%D0%9A%D0%BE%D0%BD%D0%B2%D0%B5%D0%BD%D1%86%D0%B8%D1%8F%D0%BF%D0%BE%D0%BC%D0%B8%D0%BA%D1%80%D0%BE%D1%81%D0%B5%D1%80%D0%B2%D0%B8%D1%81%D0%B0%D0%BC-JSON-RPC) интерфейс, НЕОБХОДИМО предоставлять документацию в формате [Swagger JSON](https://swagger.io/specification/), доступную по /swagger.json как указано в [Обязательные методы](https://confluence.ozon.ru/pages/viewpage.action?pageId=78354208#id-%D0%9A%D0%BE%D0%BD%D0%B2%D0%B5%D0%BD%D1%86%D0%B8%D1%8F%D0%BF%D0%BE%D0%BC%D0%B8%D0%BA%D1%80%D0%BE%D1%81%D0%B5%D1%80%D0%B2%D0%B8%D1%81%D0%B0%D0%BC-%D0%9E%D0%B1%D1%8F%D0%B7%D0%B0%D1%82%D0%B5%D0%BB%D1%8C%D0%BD%D1%8B%D0%B5%D0%BC%D0%B5%D1%82%D0%BE%D0%B4%D1%8B).

## Обязательные методы

### `/live`, `/ready`

_liveness, readiness в k8s_

### `/version`

_Версия_

```json
{
  "appName": "url-shortener",
  "appVersion": "version",
  "platformName": "GO",
  "platformVersion": "v1.10.3",
  "vcsName": "GIT",
  "vcsRevision": "d3c19ee",
  "vcsSummary": "branch: feature_1 ; git-log: -",
  "buildDate": "2018-07-27T10:27:52+00:00",
  "startDate": "2018-07-27T10:27:52+00:00"
}
```

### `/swagger.json`

_Документация в формате Swagger JSON_

Необходим только если сервис предоставляет REST или JSON-RPC интерфейс

### `/metrics`

_Метрики для Prometheus_

- Мандат Безоса

## Вендоризация

Сервисы должны предоставлять клиентские библиотеки

Общие правила для микросервисов, шаблоны

- Должен быть автоформатер
